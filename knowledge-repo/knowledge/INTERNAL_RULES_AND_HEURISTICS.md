# Internal Rules and Heuristics

This document externalizes the implicit rules, heuristics, and shortcuts I use when working on the TenantGuard project.

## Code Quality Heuristics

### Rule: Always Build Before Deploying

**Trigger:** Before running the deployment script.

**Action:** Run `pnpm run build` in the frontend directory and check for errors.

**Rationale:** Catching build errors locally saves time and prevents broken deployments.

**Exception:** If only backend code has changed, a frontend build may not be necessary, but I still do it to be safe.

---

### Rule: Test API Endpoints with curl

**Trigger:** After implementing or modifying a backend API endpoint.

**Action:** Use `curl` to send test requests and verify the response.

**Rationale:** Ensures the endpoint is working correctly before integrating with the frontend.

---

### Rule: Check Service Status After Deployment

**Trigger:** Immediately after running the deployment script.

**Action:** Run `sudo systemctl status tenantguard` to verify the service is running.

**Rationale:** Catches deployment failures early and allows for immediate remediation.

---

## Git and Version Control Heuristics

### Rule: Descriptive Commit Messages

**Format:** `[Action] [Component]: [Description]`

**Examples:**
- `Fix navigation: Update header links to use onClick handlers`
- `Add feature: Implement theme switcher with 4 color schemes`
- `Fix database: Resolve Case model initialization error`

**Rationale:** Clear commit messages make it easier to understand the project history and track down issues.

---

### Rule: Commit Frequently, Push After Testing

**Trigger:** After completing a logical unit of work.

**Action:** Commit the changes locally, but only push to GitHub after testing.

**Rationale:** Allows for local experimentation while keeping the remote repository clean and stable.

---

### Rule: Never Commit Generated Files

**Heuristic:** If a file is generated by a build process (e.g., `dist/`, `node_modules/`, `venv/`), it should be in `.gitignore`.

**Rationale:** Generated files can cause merge conflicts and bloat the repository.

---

## Deployment Heuristics

### Rule: Use the Deployment Script, Not Manual Commands

**Trigger:** When deploying changes to the server.

**Action:** Always use `./deploy_fixed.sh` rather than manually running commands.

**Rationale:** The script ensures consistency, handles errors, and includes safety features like backups.

---

### Rule: Verify the Live Site After Deployment

**Trigger:** After a successful deployment.

**Action:** Open the live site in a browser and test the new functionality.

**Rationale:** Ensures that the deployment actually worked and that there are no unexpected issues.

---

### Rule: Check Logs if Something Breaks

**Trigger:** If the service fails to start or the site is not working.

**Action:** Run `sudo journalctl -u tenantguard --no-pager | tail -50` to view recent logs.

**Rationale:** Logs provide the most direct insight into what went wrong.

---

## Problem-Solving Heuristics

### Rule: Start with the Simplest Explanation

**Heuristic:** When debugging, assume the simplest explanation first (e.g., a typo, a missing file) before considering complex issues.

**Rationale:** Occam's Razorâ€”the simplest explanation is often correct.

---

### Rule: Isolate the Problem

**Heuristic:** When a deployment fails, determine whether the issue is with the code, the build process, the deployment script, or the server environment.

**Rationale:** Narrowing down the problem space makes it easier to find a solution.

---

### Rule: Check Permissions First

**Heuristic:** If a file operation fails on the server, check file and directory permissions before assuming a code issue.

**Rationale:** Permission errors are common in server environments and are easy to fix.

---

## Communication Heuristics

### Rule: Show, Don't Just Tell

**Heuristic:** When reporting results, include screenshots, code snippets, or links to demonstrate the work.

**Rationale:** Visual evidence is more convincing and easier to understand than text descriptions alone.

---

### Rule: Provide Context in Reports

**Heuristic:** When creating a report, include not just what was done, but why it was done and what the impact is.

**Rationale:** Helps the user understand the value of the work and make informed decisions.

---

### Rule: Acknowledge Limitations

**Heuristic:** If a solution is temporary or has known limitations, explicitly state them.

**Rationale:** Builds trust and sets appropriate expectations.

---

## Design Heuristics

### Rule: Consistency Over Novelty

**Heuristic:** When designing UI components, prioritize consistency with existing patterns over introducing new ones.

**Rationale:** Consistency improves usability and reduces cognitive load.

---

### Rule: Mobile-First Responsive Design

**Heuristic:** When implementing new UI components, ensure they work on mobile devices first, then enhance for larger screens.

**Rationale:** Many users will access the platform on mobile devices.

---

### Rule: Accessibility is Not Optional

**Heuristic:** All interactive elements should be keyboard-accessible and have appropriate ARIA labels.

**Rationale:** The platform should be usable by everyone, including users with disabilities.

---

## Security Heuristics

### Rule: Never Commit Secrets

**Heuristic:** API keys, passwords, and other secrets should never be committed to version control.

**Rationale:** Prevents security breaches and unauthorized access.

**Current Practice:** Secrets are stored as environment variables on the server.

---

### Rule: Validate All User Input

**Heuristic:** All data submitted through forms should be validated on both the frontend and backend.

**Rationale:** Prevents injection attacks and ensures data integrity.

---

## Performance Heuristics

### Rule: Minimize Frontend Bundle Size

**Heuristic:** Avoid importing large libraries unless absolutely necessary.

**Rationale:** Smaller bundles load faster, improving user experience.

---

### Rule: Use Efficient Database Queries

**Heuristic:** When querying the database, only select the fields that are needed.

**Rationale:** Reduces database load and improves response times.

---

## Error Handling Heuristics

### Rule: Fail Gracefully

**Heuristic:** If an error occurs, provide a helpful error message to the user rather than crashing or showing a generic error.

**Rationale:** Improves user experience and makes debugging easier.

---

### Rule: Log Errors for Debugging

**Heuristic:** All errors should be logged with sufficient context to understand what went wrong.

**Rationale:** Makes it easier to diagnose and fix issues.

---

## Workflow Shortcuts

### Shortcut: Use `&&` to Chain Commands

**Example:** `cd /home/ubuntu/tenantguard && git pull && pnpm run build`

**Rationale:** If any command fails, the chain stops, preventing cascading errors.

---

### Shortcut: Use `tail` to View Recent Logs

**Example:** `sudo journalctl -u tenantguard | tail -50`

**Rationale:** Most relevant information is in the most recent logs.

---

### Shortcut: Use `grep` to Find Specific Code

**Example:** `grep -r "CaseIntakeForm" /home/ubuntu/tenantguard/frontend/src`

**Rationale:** Quickly locates code without manually searching through files.

---

## Meta-Heuristics

### Rule: When in Doubt, Ask

**Heuristic:** If I'm unsure about a requirement or a decision, I should ask the user rather than guessing.

**Rationale:** Prevents wasted effort and ensures alignment with the user's goals.

---

### Rule: Document as You Go

**Heuristic:** Create documentation while working on a task, not after.

**Rationale:** Ensures that details are not forgotten and that documentation is accurate.

---

### Rule: Reflect on Failures

**Heuristic:** After a deployment failure or bug, take a moment to understand what went wrong and how to prevent it in the future.

**Rationale:** Continuous improvement and learning from mistakes.
